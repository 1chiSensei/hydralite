// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

generator typegraphql {
  provider = "typegraphql-prisma"
}

// model OauthConnection {
//   id          String    @id @default(uuid())
// }

// model OauthConnection {
//   id                 String  @id @default(uuid())
//   email              String
//   username           String
//   oauthServiceUserId String
//   isPrimary          Boolean
//   owner              User
// }

model User {
  id        String      @id @default(uuid())
  createdAt DateTime    @default(now())
  username  String      @unique
  email     String      @unique
  joinDate  DateTime    @default(now())
  profile   UserProfile @relation("UserProfileRelation", fields: [profileId], references: [id])
  profileId String
  hydra     Int
  projects  Project[]   @relation("UserProjectsRelation")
}

model UserProfile {
  id        String        @id @default(uuid())
  owner     User?         @relation("UserProfileRelation")
  avatarURL String
  bio       String
  following UserProfile[] @relation("ProfileFollowRelation", references: [id])
  followers UserProfile[] @relation("ProfileFollowRelation", references: [id])
  // connections OauthConnection[]
}

model Project {
  id          String  @id @default(uuid())
  title       String
  description String
  logoUrl     String
  bannerUrl   String
  // likers        User[] @relation("likers")
  // followers     User[] @relation("followers")
  // collaborators User[]
  githubUrl   String
  User        User?   @relation("UserProjectsRelation", fields: [userId], references: [id])
  userId      String?
}
